<!DOCTYPE html>
<html>
    <head>
        <title>Drive API Quickstart</title>
        <meta charset='utf-8' />
        <link rel="shortcut icon" href="assets/ico/favicon.ico" />
        <script src="assets/js/jquery-1.11.1.min.js"></script>
    </head>
    <body>




        <pre id="content"></pre>

        <script type="text/javascript">
            var dirID = '0B2O1Jb96t9jhZUdoNU0ySDJjN00';
            // Client ID and API key from the Developer Console
            var CLIENT_ID = '100213111164-v8un5cp1i6r6tesr0cd1gsc4jc6t7evb.apps.googleusercontent.com';
            var API_KEY = 'AIzaSyBuW_tArn70PeThSmTIDFNLyfSG_piFKQQ';

            // Array of API discovery doc URLs for APIs used by the quickstart
            //var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];

            // Authorization scopes required by the API; multiple scopes can be
            // included, separated by spaces.
            //var SCOPES = 'https://www.googleapis.com/auth/drive.metadata.readonly';



            var url = "https://www.googleapis.com/drive/v3/files?orderBy=folder+desc%2CcreatedTime+desc%2C+name&pageSize=100&q='" + dirID + "'+in+parents&key=" + API_KEY;
            /**
             * Append a pre element to the body containing the given message
             * as its text node. Used to display the results of the API call.
             *
             * @param {string} message Text to be placed in pre element.
             */
            function appendPre(message) {
                console.log('appendPre');
                var pre = document.getElementById('content');
                var textContent = document.createTextNode(message + '\n');
                //document.write("<a href='https://drive.google.com/open?id="+file.id+"'>"+file.name + '</a> <br>');

                pre.appendChild(textContent);
            }

            /**
             * Print files.
             */
            function listFiles() {
                console.log('listFiles');
                $.getJSON(url, function (response) {
                    //console.log("success");
                    //console.log(response.kind);
                    //console.log(response.files);
                    var files = response.files;
                    //console.log(files);
                    if (files && files.length > 0) {
                        for (var i = 0; i < files.length; i++) {
                            var file = files[i];
                            appendPre(i + '   ' + file.name + '    (' + file.id + ')');//kind, mime Type
                            //document.write("<a href='https://drive.google.com/open?id="+file.id+"'>"+file.name + '</a> <br>');
                        }

                    } else {
                        appendPre('No files found.');
                    }
                })
                        .done(function () {
                            console.log("second success");
                        })
                        .fail(function () {
                            console.log("error");
                        })
                        .always(function () {
                            console.log("complete");
                        });

            }

        </script>

        <script async defer src="https://apis.google.com/js/api.js" onload="this.onload = function () {};
                listFiles()"
                onreadystatechange="if (this.readyState === 'complete') this.onload()">
        </script>
    </body>
</html>